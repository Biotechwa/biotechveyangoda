<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Biotech Login</title>
    
    <!-- TAILWIND CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ICONS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PWA Settings -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#111827">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; 
            background-image: radial-gradient(#1f2937 1px, transparent 1px);
            background-size: 20px 20px;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #app-frame {
            width: 100%;
            height: 100%;
            background: #fff;
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        @media (min-width: 768px) {
            #app-frame {
                max-width: 420px;
                height: 90vh;
                border-radius: 24px;
                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
                border: 8px solid #1f2937;
            }
        }

        .animate-enter { animation: fadeInUp 0.6s ease-out forwards; opacity: 0; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        .shake-animation {
            animation: shake 0.5s;
        }
    </style>
</head>
<body>

    <!-- APP CONTAINER -->
    <main id="app-frame">
        
        <!-- HEADER -->
        <header class="bg-teal-900 text-white p-6 shadow-md z-20 flex flex-col items-center justify-center shrink-0 h-48 rounded-b-[3rem] relative overflow-hidden">
            <div class="absolute inset-0 bg-teal-800/30"></div>
            <!-- Decorative Circles -->
            <div class="absolute -top-10 -left-10 w-32 h-32 bg-teal-500/10 rounded-full blur-2xl"></div>
            <div class="absolute top-10 right-10 w-24 h-24 bg-blue-500/10 rounded-full blur-xl"></div>

            <div class="relative z-10 flex flex-col items-center animate-enter">
                <div class="w-20 h-20 bg-white/10 backdrop-blur-md rounded-full flex items-center justify-center mb-3 shadow-xl border border-white/20">
                    <i class="fa-solid fa-flask text-3xl text-teal-300"></i>
                </div>
                <h1 class="font-bold text-2xl tracking-wide">BIOTECH LAB</h1>
                <p class="text-teal-200 text-xs mt-1 font-medium tracking-wider uppercase">Secure Access Portal</p>
            </div>
        </header>
        
        <!-- LOGIN FORM AREA -->
        <div class="flex-1 overflow-y-auto p-8 flex flex-col justify-center bg-slate-50 relative">
            
            <div id="loginCard" class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100 animate-enter" style="animation-delay: 0.1s;">
                <h2 class="text-gray-800 font-bold text-xl mb-6 text-center">Welcome Back</h2>
                
                <form id="loginForm" class="space-y-4">
                    <div>
                        <label for="username" class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 ml-1">Username</label>
                        <div class="relative">
                            <i class="fa-solid fa-user absolute left-4 top-3.5 text-gray-400 text-sm"></i>
                            <input type="text" id="username" placeholder="Enter Username" required autocapitalize="none"
                                class="w-full bg-gray-50 text-gray-700 text-sm pl-10 pr-4 py-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:bg-white focus:ring-2 focus:ring-teal-100 outline-none transition duration-200">
                        </div>
                    </div>
                    
                    <div>
                        <label for="password" class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 ml-1">Password</label>
                        <div class="relative">
                            <i class="fa-solid fa-lock absolute left-4 top-3.5 text-gray-400 text-sm"></i>
                            <input type="password" id="password" placeholder="••••••••" required
                                class="w-full bg-gray-50 text-gray-700 text-sm pl-10 pr-4 py-3 rounded-xl border border-gray-200 focus:border-teal-500 focus:bg-white focus:ring-2 focus:ring-teal-100 outline-none transition duration-200">
                        </div>
                    </div>

                    <button type="submit" 
                        class="w-full bg-gradient-to-r from-teal-600 to-teal-500 hover:from-teal-700 hover:to-teal-600 text-white font-bold py-3.5 rounded-xl shadow-lg shadow-teal-500/30 transform transition active:scale-[0.98] mt-4 flex items-center justify-center gap-2">
                        <span>Secure Login</span>
                        <i class="fa-solid fa-arrow-right text-sm"></i>
                    </button>
                </form>

                <!-- Error Message -->
                <div id="errorMsg" class="hidden mt-4 p-3 bg-red-50 border border-red-100 rounded-lg flex items-center gap-3">
                    <i class="fa-solid fa-circle-exclamation text-red-500"></i>
                    <p class="text-red-600 text-xs font-medium">Invalid credentials. Please try again.</p>
                </div>
            </div>

            <p class="text-center text-gray-400 text-[10px] mt-8">
                &copy; 2025 BioTech Veyangoda<br>Laboratory Network System
            </p>
        </div>
    </main>

    <script>
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const userInput = document.getElementById('username').value.trim();
            const passInput = document.getElementById('password').value.trim();
            const errorMsg = document.getElementById('errorMsg');
            const loginCard = document.getElementById('loginCard');
            const submitBtn = this.querySelector('button');

            let isAuthenticated = false;

            // --- CREDENTIAL LOGIC ---

            // User 1: Theekshana1298 (Strict)
            if (userInput === "Theekshana1298" && passInput === "Theekshana1298") {
                isAuthenticated = true;
            }
            // User 2: admin_btlab (Username case-insensitive, Password exact)
            else if (userInput.toLowerCase() === "admin_btlab" && passInput === "admin_btlab") {
                isAuthenticated = true;
            }

            // --- REDIRECT LOGIC ---

            if (isAuthenticated) {
                // UI Success State
                errorMsg.classList.add('hidden');
                submitBtn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Authenticating...';
                submitBtn.classList.remove('from-teal-600', 'to-teal-500');
                submitBtn.classList.add('from-green-600', 'to-green-500');
                
                // Slight delay for UX before redirect
                setTimeout(() => {
                    // NEW REDIRECT URL
                    window.location.href = "https://www.biotechveyangoda.lk/Biotechlaboratorychatsysteminternetworksystemandlogingrequired";
                }, 800);
            } else {
                // UI Error State
                errorMsg.classList.remove('hidden');
                
                // Shake Animation
                loginCard.classList.remove('shake-animation');
                void loginCard.offsetWidth; // trigger reflow
                loginCard.classList.add('shake-animation');
                
                // Clear password
                document.getElementById('password').value = '';
                document.getElementById('password').focus();
            }
        });

        // Service Worker Registration (PWA)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js').catch(err => console.log('SW fail', err));
            });
        }
    </script>
</body>
</html>
